(function(e){function t(t){for(var n,u,i=t[0],o=t[1],l=t[2],c=0,m=[];c<i.length;c++)u=i[c],Object.prototype.hasOwnProperty.call(a,u)&&a[u]&&m.push(a[u][0]),a[u]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);d&&d(t);while(m.length)m.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,u=1;u<r.length;u++){var o=r[u];0!==a[o]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},s=[];function u(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-2d213cc4":"a1fde968"}[e]+".js"}function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=n);var s,o=document.createElement("script");o.charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.src=u(e);var l=new Error;s=function(t){o.onerror=o.onload=null,clearTimeout(c);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",l.name="ChunkLoadError",l.type=n,l.request=s,r[1](l)}a[e]=void 0}};var c=setTimeout((function(){s({type:"timeout",target:o})}),12e4);o.onerror=o.onload=s,document.head.appendChild(o)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},2055:function(e,t,r){"use strict";var n=r("84df"),a=r.n(n);a.a},"42c1":function(e,t,r){"use strict";var n=r("b6ec"),a=r.n(n);a.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},s=[],u=(r("034f"),r("2877")),i={},o=Object(u["a"])(i,a,s,!1,null,null,null),l=o.exports,c=(r("d3b7"),r("8c4f")),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h3",{staticStyle:{"text-align":"center",padding:"0 0 7px 0"}},[e._v("Terraplan Kostenrechnung 2020")]),r("produkte-jahresueberblick"),r("personal"),r("extraEinnahmen"),r("wartungsvertraege")],1)},m=[],p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"produktJahresueberblick"}},[r("hr"),r("ul",e._l(e.produktList,(function(t){return r("produkt-item",{key:t._id,attrs:{produkt:t,"calculate-results":e.calculateResultsApi}})})),1),r("b-modal",{attrs:{id:"modal-kalkulierte-kosten",size:"xl",title:"Kalkulierte Kosten hinzufügen","area-hidden":"false"},on:{ok:function(t){return e.submit()}}},[e._v(" "+e._s(e.newKalkulierteKosten)+" "),r("b-table-simple",{attrs:{striped:"",hover:""}},[r("b-thead",[r("b-tr",[e._l(e.fields,(function(t,n){return r("b-th",{key:n},[e._v(e._s(t.key))])})),r("b-th")],2)],1),r("b-tbody",[r("b-tr",e._l(e.fields,(function(t,n){return r("b-th",{key:n},["nameKosten"===t.key?r("b-form-select",{attrs:{options:e.bFormOptionsKalkulierteKosten},model:{value:e.newKalkulierteKosten[t.key],callback:function(r){e.$set(e.newKalkulierteKosten,t.key,r)},expression:"newKalkulierteKosten[field.key]"}}):"terraWeb"===t.key||"terraSchüler"===t.key||"terraIndividual"===t.key?r("b-form-input",{attrs:{type:"number"},model:{value:e.newKalkulierteKosten[t.key],callback:function(r){e.$set(e.newKalkulierteKosten,t.key,r)},expression:"newKalkulierteKosten[field.key]"}}):r("b-form-input",{attrs:{placeholder:t.key},model:{value:e.newKalkulierteKosten[t.key],callback:function(r){e.$set(e.newKalkulierteKosten,t.key,r)},expression:"newKalkulierteKosten[field.key]"}})],1)})),1)],1)],1)],1),r("hr"),r("div",{staticClass:"inputJahr"},[r("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-kalkulierte-kosten",modifiers:{"modal-kalkulierte-kosten":!0}}],attrs:{variant:"light",size:"sm"}},[e._v("Kalkulierte Kosten ändern")])],1)],1)},k=[],f=(r("4de4"),r("d81d"),r("96cf"),r("1da1")),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("li",[this.$store.getters.extraEinnahmen.length&&this.$store.getters.wartungsvertraege.length&&this.$store.getters.personal.length&&this.$store.getters.kalkulierteKosten.length?r("h3",[e._v(" "+e._s(e.produkt.name)+" : "+e._s(this.$store.getters.wartungsvertraege[0][e.produkt.name]+this.$store.getters.extraEinnahmen[0][e.produkt.name]-this.$store.getters.personal[0][e.produkt.name])+" ")]):e._e(),r("jahreskennzahlItem",{attrs:{name:e.produkt.name,"calculate-results":e.calculateResults}})],1)])},g=[],v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[this.$store.getters.extraEinnahmen.length&&this.$store.getters.wartungsvertraege.length&&this.$store.getters.personal.length&&this.$store.getters.kalkulierteKosten.length?r("li",[r("ul",{staticClass:"leistungen"},[e._v("Wartungsverträge: "+e._s(this.$store.getters.wartungsvertraege[0][e.name]))]),r("ul",{staticClass:"leistungen"},[e._v("Extra Einnahmen: "+e._s(this.$store.getters.extraEinnahmen[0][e.name]))]),r("ul",{staticClass:"kosten"},[e._v("Personal: "+e._s(this.$store.getters.personal[0][e.name]))]),e._m(0),r("ul",{staticClass:"annotation"},[e._v("Basierend auf 2019 kalkuliert:")]),e._l(e.itemsKalkulierteKosten,(function(t){return r("ul",{key:t._id,staticClass:"kosten"},[e._v(" "+e._s(t.nameKosten+": "+t[e.name])+" ")])}))],2):e._e()])},b=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("br")])}],y=r("bc3a"),w=r.n(y),x="http://localhost:5000/api",_=w.a.create({baseURL:x}),I={name:"jahreskennzahlItem",data:function(){return{loadingExtraEinnahmen:!1}},computed:{jahr:{get:function(){return this.$store.state.form.jahr}},itemsKalkulierteKosten:{get:function(){return this.$store.getters.kalkulierteKosten}}},props:{name:String,calculateResults:Object},methods:{},mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:_.get("/produkte").then((function(t){return e.produkteList=t.data})).catch((function(e){return console.log(e)}));case 1:case"end":return t.stop()}}),t)})))()}},j=I,E=(r("2055"),Object(u["a"])(j,v,b,!1,null,"1a5a85c8",null)),K=E.exports,R={name:"produktItem",props:{produkt:Object,calculateResults:Object},data:function(){return{}},components:{jahreskennzahlItem:K},computed:{},methods:{reload:function(){var e=this,t="http://localhost:5000/api/produkte",r=w.a.get(t);w.a.all([r]).then(w.a.spread((function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.produktList=r[0].data}))).catch((function(e){return console.log(e)}))}},watch:{jahr:function(){}},mounted:function(){this.reload()}},$=R,L=(r("c358"),Object(u["a"])($,h,g,!1,null,"690ac2b7",null)),S=L.exports,O={name:"produktJahresueberblick",watch:{jahr:function(){var e=this;this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.timeoutId=setTimeout(Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.reload();case 2:case"end":return t.stop()}}),t)}))),300),this.$store.dispatch("updateJahr",this.jahr)}},components:{produktItem:S},beforeDestroy:function(){this.unwatch()},props:{},data:function(){return{produktList:null,calculateResultsApi:null,jahrCurrent:(new Date).getFullYear(),timeoutId:null,fields:[{key:"nameKosten",sortable:!0},{key:"terraWeb",sortable:!1},{key:"terraSchüler",sortable:!1},{key:"terraIndividual",sortable:!1},{key:"sonstige",sortable:!1}],bFormOptionsKalkulierteKosten:["Gemeinkosten","Serverkosten","Nebenkosten","Vertriebskosten"],newKalkulierteKosten:{},kalkulierteKostenItem:{},produkteList:[],kalkulierteKostenList:[]}},mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch("updateJahr",e.jahrCurrent),w.a.get("http://localhost:5000/api/produkte").then((function(t){return e.produktList=t.data})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},computed:{jahr:{get:function(){return this.$store.state.form.jahr},set:function(e){this.$store.commit("updateJahr",e)}}},methods:{reload:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,r=0;case 2:if(!(r<e.bFormOptionsKalkulierteKosten.length)){t.next=10;break}return t.next=5,_.get("/kalkulierteKosten/newest?namekosten=".concat(e.bFormOptionsKalkulierteKosten[r]));case 5:n=t.sent,e.kalkulierteKostenList.push(n.data[0]);case 7:r++,t.next=2;break;case 10:e.$store.dispatch("updateKalkulierteKosten",e.kalkulierteKostenList),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},submit:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_.post("/kalkulierteKosten",e.newKalkulierteKosten);case 2:if(r=t.sent,e.submitKalkulierteKosten(),200!==r.status){t.next=7;break}return t.next=7,e.reload();case 7:case"end":return t.stop()}}),t)})))()},removeItem:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,_.delete("/kalkulierteKosten/".concat(e));case 2:if(n=r.sent,200!==n.status){r.next=8;break}return alert("Eintrag mit ID ".concat(e," wurde gelöscht.")),r.next=7,t.reload();case 7:t.submitKalkulierteKosten();case 8:case"end":return r.stop()}}),r)})))()},loadItem:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,_.get("/kalkulierteKosten/ID/".concat(e));case 2:n=r.sent,t.kalkulierteKostenItem=n.data;case 4:case"end":return r.stop()}}),r)})))()},updateItem:function(e,t){var r=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,_.put("/kalkulierteKosten/".concat(e),t);case 2:if(a=n.sent,200!==a.status){n.next=7;break}return n.next=6,r.reload();case 6:r.submitKalkulierteKosten();case 7:case"end":return n.stop()}}),n)})))()},submitKalkulierteKosten:function(){this.$store.dispatch("updateKalkulierteKosten",this.kalkulierteKostenList)},submitKalkulierteKostenToStore:function(e){var t=this,r=this.totalKalkulierteKosten(e),n=r.filter((function(e){return e.jahr===t.$store.getters.jahr}));this.$store.dispatch("updateKalkulierteKosten",n)},totalKalkulierteKosten:function(e){if(!e)return 0;var t=e.map((function(e){var t={};return t["jahr"]=new Date(e["jahr"]).getFullYear(),t["nameKosten"]=e["nameKosten"]?e["nameKosten"]:"",t["terraWeb"]=e["prozentWeb"]?e["prozentWeb"]:0,t["terraSchüler"]=e["prozentSchueler"]?e["prozentSchueler"]:0,t["terraIndividual"]=e["prozentIndividual"]?e["prozentIndividual"]:0,t["sonstige"]=0,t}));return console.log(t),t}}},W=O,D=(r("42c1"),Object(u["a"])(W,p,k,!1,null,"0d8aacd7",null)),P=D.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",[e._v("Extra Einnahmen")]),e._v(" feat: The new feature you're adding to a particular application fix: A bug fix style: Feature and updates related to styling refactor: Refactoring a specific section of the codebase test: Everything related to testing docs: Everything related to documentation chore: Regular code maintenance. "),r("br"),r("div",[r("b-modal",{attrs:{id:"modal-extra-einnahmen",size:"xl",title:"Extra Einnahme","area-hidden":"false"},on:{ok:function(t){return e.updateItem(e.extraEinnahmenItem._id,e.extraEinnahmenItem)}}},[r("p",{staticClass:"my-4"},[r("b-table-simple",[r("b-tr",e._l(e.fields,(function(t,n){return r("b-th",{key:n},[e._v(" "+e._s(t.key)+" ")])})),1),r("b-tr",e._l(e.fields,(function(t,n){return r("b-th",{key:n},["preis"===t.key?r("b-form-input",{attrs:{type:"number"},model:{value:e.extraEinnahmenItem[t.key],callback:function(r){e.$set(e.extraEinnahmenItem,t.key,r)},expression:"extraEinnahmenItem[field.key]"}}):"datumAbgeschlossen"===t.key?r("b-form-datepicker",{model:{value:e.extraEinnahmenItem[t.key],callback:function(r){e.$set(e.extraEinnahmenItem,t.key,r)},expression:"extraEinnahmenItem[field.key]"}}):"produkt"===t.key?r("b-form-select",{attrs:{options:e.produkteListBFormOptions},model:{value:e.extraEinnahmenItem[t.key],callback:function(r){e.$set(e.extraEinnahmenItem,t.key,r)},expression:"extraEinnahmenItem[field.key]"}}):r("b-form-input",{attrs:{placeholder:t.key},model:{value:e.extraEinnahmenItem[t.key],callback:function(r){e.$set(e.extraEinnahmenItem,t.key,r)},expression:"extraEinnahmenItem[field.key]"}})],1)})),1)],1)],1)])],1),r("b-table-simple",{attrs:{striped:"",hover:""}},[r("b-thead",[r("b-tr",[e._l(e.fields,(function(t,n){return r("b-th",{key:n},[e._v(e._s(t.key))])})),r("b-th")],2)],1),r("b-tbody",[e._l(e.extraEinnahmenList,(function(t,n){return r("b-tr",{key:n},[e._l(e.fields,(function(n,a){return r("b-th",{key:a},[t[n.key]&&"datumAbgeschlossen"===n.key?r("span",[e._v(" "+e._s(new Date(t[n.key]).toLocaleDateString())+" ")]):r("span",[e._v(e._s(t[n.key]))])])})),r("b-th",[r("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-extra-einnahmen",modifiers:{"modal-extra-einnahmen":!0}}],key:n,attrs:{variant:"info"},on:{click:function(r){return r.preventDefault(),e.loadItem(t._id)}}},[e._v("Edit")])],1)],2)})),r("b-tr",[e._l(e.fields,(function(t,n){return r("b-th",{key:n},["preis"===t.key?r("b-form-input",{attrs:{type:"number"},on:{click:e.submitCalculateResult},model:{value:e.newExtraEinnahme[t.key],callback:function(r){e.$set(e.newExtraEinnahme,t.key,r)},expression:"newExtraEinnahme[field.key]"}}):"datumAbgeschlossen"===t.key?r("b-form-datepicker",{model:{value:e.newExtraEinnahme[t.key],callback:function(r){e.$set(e.newExtraEinnahme,t.key,r)},expression:"newExtraEinnahme[field.key]"}}):"produkt"===t.key?r("b-form-select",{attrs:{options:e.produkteListBFormOptions},model:{value:e.newExtraEinnahme[t.key],callback:function(r){e.$set(e.newExtraEinnahme,t.key,r)},expression:"newExtraEinnahme[field.key]"}}):r("b-form-input",{attrs:{placeholder:t.key},model:{value:e.newExtraEinnahme[t.key],callback:function(r){e.$set(e.newExtraEinnahme,t.key,r)},expression:"newExtraEinnahme[field.key]"}})],1)})),r("b-th",[r("b-btn",{attrs:{variant:"success"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("Submit")])],1)],2)],2)],1)],1)},C=[],z=(r("4160"),r("13d5"),r("45fc"),r("b0c0"),r("159b"),r("5530")),M={name:"extraEinnahmen",data:function(){return{sortBy:"age",sortDesc:!1,fields:[{key:"kunde",sortable:!0},{key:"beschreibung",sortable:!1},{key:"idLexware",sortable:!1},{key:"produkt",sortable:!0},{key:"status",sortable:!1},{key:"datumAbgeschlossen",sortable:!0},{key:"preis",sortable:!0},{key:"verantwortlich",sortable:!0}],extraEinnahmenList:null,newExtraEinnahme:{},extraEinnahmenItem:{},produkteList:[]}},computed:{produkteListBFormOptions:function(){var e=this.produkteList.map((function(e){return e.name}));return e}},methods:{reload:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.get("/extraEinnahmen");case 3:r=t.sent,e.extraEinnahmenList=r.data,e.submitCalculateResultToStore(r.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},submit:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_.post("/extraeinnahmen",e.newExtraEinnahme);case 2:if(r=t.sent,200!==r.status){t.next=6;break}return t.next=6,e.reload();case 6:e.submitCalculateResult();case 7:case"end":return t.stop()}}),t)})))()},removeItem:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,_.delete("/extraeinnahmen/".concat(e));case 2:if(n=r.sent,200!==n.status){r.next=8;break}return alert("Eintrag mit ID ".concat(e," wurde gelöscht.")),r.next=7,t.reload();case 7:t.submitCalculateResult();case 8:case"end":return r.stop()}}),r)})))()},loadItem:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,_.get("/extraeinnahmen/ID/".concat(e));case 2:n=r.sent,t.extraEinnahmenItem=n.data;case 4:case"end":return r.stop()}}),r)})))()},updateItem:function(e,t){var r=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,_.put("/extraeinnahmen/".concat(e),t);case 2:if(a=n.sent,200!==a.status){n.next=7;break}return n.next=6,r.reload();case 6:r.submitCalculateResult();case 7:case"end":return n.stop()}}),n)})))()},submitCalculateResult:function(){var e=this,t=this.totalExtraEinnahmen(this.extraEinnahmenList),r=t.filter((function(t){return t.jahr===e.$store.getters.jahr}));this.$store.dispatch("updateExtraEinnahmen",r),t.forEach(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=_.post("/calculateResults",r),200!==n.status){t.next=4;break}return t.next=4,e.reload();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},submitCalculateResultToStore:function(e){var t=this,r=this.totalExtraEinnahmen(e),n=r.filter((function(e){return e.jahr===t.$store.getters.jahr}));this.$store.dispatch("updateExtraEinnahmen",n)},totalExtraEinnahmen:function(e){if(!this.extraEinnahmenList)return 0;var t=e.map((function(e){var t={};return t["jahr"]=new Date(e["datumAbgeschlossen"]).getFullYear(),t["preis"]=e["preis"],t["produkt"]=e["produkt"],t})),r={};this.produkteList.map((function(e){r[e.name]=0}));var n=t.reduce((function(e,t){return e.some((function(e){return e.jahr===t.jahr}))||e.push(Object(z["a"])({jahr:t.jahr,kostenLeistung:"extraEinnahmen"},r)),e.forEach((function(e){e.jahr===t.jahr&&(e[t.produkt]=e[t.produkt]+t.preis)})),e}),[]);return n}},mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return _.get("/produkte").then((function(t){return e.produkteList=t.data})).catch((function(e){return console.log(e)})),t.next=3,e.reload();case 3:case"end":return t.stop()}}),t)})))()},components:{}},F=M,G=Object(u["a"])(F,T,C,!1,null,"c6ba3a84",null),A=G.exports,B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",[e._v("Wartungsverträge Terra Schüler")]),r("b-modal",{attrs:{id:"wartungsvertraege-terra-schueler",size:"xl",title:"BootstrapVue","area-hidden":"false"},on:{ok:function(t){return e.updateItem(e.wartungsvertraegeItem._id,e.wartungsvertraegeItem)}}},[r("p",{staticClass:"my-4"},[r("b-table-simple",[r("b-tr",e._l(e.fieldsTerraSchueler,(function(t,n){return r("b-th",{key:n},[e._v(" "+e._s(t.key)+" ")])})),1),r("b-tr",e._l(e.fieldsTerraSchueler,(function(t,n){return r("b-th",{key:n},["preis"===t.key?r("b-form-input",{attrs:{type:"number"},model:{value:e.wartungsvertraegeItem[t.key],callback:function(r){e.$set(e.wartungsvertraegeItem,t.key,r)},expression:"wartungsvertraegeItem[field.key]"}}):"datumAbgeschlossen"===t.key?r("b-form-datepicker",{model:{value:e.wartungsvertraegeItem[t.key],callback:function(r){e.$set(e.wartungsvertraegeItem,t.key,r)},expression:"wartungsvertraegeItem[field.key]"}}):"produkt"===t.key?r("b-form-select",{attrs:{options:e.produkteListBFormOptions},model:{value:e.wartungsvertraegeItem[t.key],callback:function(r){e.$set(e.wartungsvertraegeItem,t.key,r)},expression:"wartungsvertraegeItem[field.key]"}}):r("b-form-input",{attrs:{placeholder:t.key},model:{value:e.wartungsvertraegeItem[t.key],callback:function(r){e.$set(e.wartungsvertraegeItem,t.key,r)},expression:"wartungsvertraegeItem[field.key]"}})],1)})),1)],1)],1)]),r("b-table-simple",{attrs:{striped:"",hover:""}},[r("b-thead",[r("b-tr",[e._l(e.fieldsTerraSchueler,(function(t,n){return r("b-th",{key:n},[e._v(e._s(t.key))])})),r("b-th")],2)],1),r("b-tbody",[e._l(e.wartungsvertraegeListTerraSchueler,(function(t){return r("b-tr",{key:t._id},[e._l(e.fieldsTerraSchueler,(function(n,a){return r("b-th",{key:a},[t[n.key]&&"start"===n.key?r("span",[e._v(" "+e._s(new Date(t[n.key]).toLocaleDateString())+" ")]):r("span",[e._v(e._s(t[n.key]))])])})),r("b-th",[r("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.wartungsvertraege-terra-schueler",modifiers:{"wartungsvertraege-terra-schueler":!0}}],key:e.index,attrs:{variant:"info"},on:{click:function(r){return r.preventDefault(),e.loadItem(t._id)}}},[e._v("Edit")])],1)],2)})),r("b-tr",[e._l(e.fieldsTerraSchueler,(function(t,n){return r("b-th",{key:n},["start"===t.key?r("b-form-datepicker",{model:{value:e.newWartungsvertrag[t.key],callback:function(r){e.$set(e.newWartungsvertrag,t.key,r)},expression:"newWartungsvertrag[field.key]"}}):"fixOderGeplant"===t.key?r("b-form-select",{attrs:{options:["fix","geplant"]},model:{value:e.newWartungsvertrag[t.key],callback:function(r){e.$set(e.newWartungsvertrag,t.key,r)},expression:"newWartungsvertrag[field.key]"}}):"produkt"===t.key?r("b-form-select",{attrs:{options:e.produkteListBFormOptions},model:{value:e.newWartungsvertrag[t.key],callback:function(r){e.$set(e.newWartungsvertrag,t.key,r)},expression:"newWartungsvertrag[field.key]"}}):r("b-form-input",{attrs:{placeholder:t.key},model:{value:e.newWartungsvertrag[t.key],callback:function(r){e.$set(e.newWartungsvertrag,t.key,r)},expression:"newWartungsvertrag[field.key]"}})],1)})),r("b-th",[r("b-btn",{attrs:{variant:"success"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("Submit")])],1)],2)],2)],1),r("h2",[e._v("Wartungsverträge Terra Individual")]),r("b-modal",{attrs:{id:"wartungsvertraege-terra-individual",size:"xl",title:"BootstrapVue","area-hidden":"false"},on:{ok:function(t){return e.updateItem(e.wartungsvertraegeItem._id,e.wartungsvertraegeItem)}}},[r("p",{staticClass:"my-4"},[r("b-table-simple",[r("b-tr",e._l(e.fieldsTerraIndividual,(function(t,n){return r("b-th",{key:n},[e._v(" "+e._s(t.key)+" ")])})),1),r("b-tr",e._l(e.fieldsTerraIndividual,(function(t,n){return r("b-th",{key:n},["preis"===t.key?r("b-form-input",{attrs:{type:"number"},model:{value:e.wartungsvertraegeItem[t.key],callback:function(r){e.$set(e.wartungsvertraegeItem,t.key,r)},expression:"wartungsvertraegeItem[field.key]"}}):"datumAbgeschlossen"===t.key?r("b-form-datepicker",{model:{value:e.wartungsvertraegeItem[t.key],callback:function(r){e.$set(e.wartungsvertraegeItem,t.key,r)},expression:"wartungsvertraegeItem[field.key]"}}):"produkt"===t.key?r("b-form-select",{attrs:{options:e.produkteListBFormOptions},model:{value:e.wartungsvertraegeItem[t.key],callback:function(r){e.$set(e.wartungsvertraegeItem,t.key,r)},expression:"wartungsvertraegeItem[field.key]"}}):r("b-form-input",{attrs:{placeholder:t.key},model:{value:e.wartungsvertraegeItem[t.key],callback:function(r){e.$set(e.wartungsvertraegeItem,t.key,r)},expression:"wartungsvertraegeItem[field.key]"}})],1)})),1)],1)],1)]),r("b-table-simple",{attrs:{striped:"",hover:""}},[r("b-thead",[r("b-tr",[e._l(e.fieldsTerraIndividual,(function(t,n){return r("b-th",{key:n},[e._v(e._s(t.key))])})),r("b-th")],2)],1),r("b-tbody",[e._l(e.wartungsvertraegeListTerraIndividual,(function(t){return r("b-tr",{key:t._id},[e._l(e.fieldsTerraIndividual,(function(n,a){return r("b-th",{key:a},[t[n.key]&&"start"===n.key?r("span",[e._v(" "+e._s(new Date(t[n.key]).toLocaleDateString())+" ")]):r("span",[e._v(e._s(t[n.key]))])])})),r("b-th",[r("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.wartungsvertraege-terra-individual",modifiers:{"wartungsvertraege-terra-individual":!0}}],key:e.index,attrs:{variant:"info"},on:{click:function(r){return r.preventDefault(),e.loadItem(t._id)}}},[e._v("Edit")])],1)],2)})),r("b-tr",[e._l(e.fieldsTerraIndividual,(function(t,n){return r("b-th",{key:n},["start"===t.key?r("b-form-datepicker",{model:{value:e.newWartungsvertrag[t.key],callback:function(r){e.$set(e.newWartungsvertrag,t.key,r)},expression:"newWartungsvertrag[field.key]"}}):"fixOderGeplant"===t.key?r("b-form-select",{attrs:{options:["fix","geplant"]},model:{value:e.newWartungsvertrag[t.key],callback:function(r){e.$set(e.newWartungsvertrag,t.key,r)},expression:"newWartungsvertrag[field.key]"}}):"produkt"===t.key?r("b-form-select",{attrs:{options:e.produkteListBFormOptions},model:{value:e.newWartungsvertrag[t.key],callback:function(r){e.$set(e.newWartungsvertrag,t.key,r)},expression:"newWartungsvertrag[field.key]"}}):r("b-form-input",{attrs:{placeholder:t.key},model:{value:e.newWartungsvertrag[t.key],callback:function(r){e.$set(e.newWartungsvertrag,t.key,r)},expression:"newWartungsvertrag[field.key]"}})],1)})),r("b-th",[r("b-btn",{attrs:{variant:"success"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("Submit")])],1)],2)],2)],1),r("h2",[e._v("Wartungsverträge Terra Web")]),r("b-modal",{attrs:{id:"wartungsvertraege-terra-web",size:"xl",title:"BootstrapVue","area-hidden":"false"},on:{ok:function(t){return e.updateItem(e.wartungsvertraegeItem._id,e.wartungsvertraegeItem)}}},[r("p",{staticClass:"my-4"},[r("b-table-simple",[r("b-tr",e._l(e.fieldsTerraWeb,(function(t,n){return r("b-th",{key:n},[e._v(" "+e._s(t.key)+" ")])})),1),r("b-tr",e._l(e.fieldsTerraWeb,(function(t,n){return r("b-th",{key:n},["preis"===t.key?r("b-form-input",{attrs:{type:"number"},model:{value:e.wartungsvertraegeItem[t.key],callback:function(r){e.$set(e.wartungsvertraegeItem,t.key,r)},expression:"wartungsvertraegeItem[field.key]"}}):"datumAbgeschlossen"===t.key?r("b-form-datepicker",{model:{value:e.wartungsvertraegeItem[t.key],callback:function(r){e.$set(e.wartungsvertraegeItem,t.key,r)},expression:"wartungsvertraegeItem[field.key]"}}):"produkt"===t.key?r("b-form-select",{attrs:{options:e.produkteListBFormOptions},model:{value:e.wartungsvertraegeItem[t.key],callback:function(r){e.$set(e.wartungsvertraegeItem,t.key,r)},expression:"wartungsvertraegeItem[field.key]"}}):r("b-form-input",{attrs:{placeholder:t.key},model:{value:e.wartungsvertraegeItem[t.key],callback:function(r){e.$set(e.wartungsvertraegeItem,t.key,r)},expression:"wartungsvertraegeItem[field.key]"}})],1)})),1)],1)],1)]),r("b-table-simple",{attrs:{striped:"",hover:""}},[r("b-thead",[r("b-tr",[e._l(e.fieldsTerraWeb,(function(t,n){return r("b-th",{key:n},[e._v(e._s(t.key))])})),r("b-th")],2)],1),r("b-tbody",[e._l(e.wartungsvertraegeListTerraWeb,(function(t){return r("b-tr",{key:t._id},[e._l(e.fieldsTerraWeb,(function(n,a){return r("b-th",{key:a},[t[n.key]&&"start"===n.key?r("span",[e._v(" "+e._s(new Date(t[n.key]).toLocaleDateString())+" ")]):r("span",[e._v(e._s(t[n.key]))])])})),r("b-th",[r("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.wartungsvertraege-terra-web",modifiers:{"wartungsvertraege-terra-web":!0}}],key:e.index,attrs:{variant:"info"},on:{click:function(r){return r.preventDefault(),e.loadItem(t._id)}}},[e._v("Edit")])],1)],2)})),r("b-tr",[e._l(e.fieldsTerraWeb,(function(t,n){return r("b-th",{key:n},["start"===t.key?r("b-form-datepicker",{model:{value:e.newWartungsvertrag[t.key],callback:function(r){e.$set(e.newWartungsvertrag,t.key,r)},expression:"newWartungsvertrag[field.key]"}}):"fixOderGeplant"===t.key?r("b-form-select",{attrs:{options:["fix","geplant"]},model:{value:e.newWartungsvertrag[t.key],callback:function(r){e.$set(e.newWartungsvertrag,t.key,r)},expression:"newWartungsvertrag[field.key]"}}):"produkt"===t.key?r("b-form-select",{attrs:{options:e.produkteListBFormOptions},model:{value:e.newWartungsvertrag[t.key],callback:function(r){e.$set(e.newWartungsvertrag,t.key,r)},expression:"newWartungsvertrag[field.key]"}}):r("b-form-input",{attrs:{placeholder:t.key},model:{value:e.newWartungsvertrag[t.key],callback:function(r){e.$set(e.newWartungsvertrag,t.key,r)},expression:"newWartungsvertrag[field.key]"}})],1)})),r("b-th",[r("b-btn",{attrs:{variant:"success"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("Submit")])],1)],2)],2)],1)],1)},J=[],N=r("53ca"),Y={data:function(){return{fields:[{key:"produkt",sortable:!0,produkt:"allgemein"},{key:"kunde",sortable:!0,produkt:"allgemein"},{key:"start",sortable:!0,produkt:"allgemein"},{key:"fixOderGeplant",sortable:!0,produkt:"allgemein"},{key:"proMonat",sortable:!1,produkt:"allgemein"},{key:"einmaligeZahlung",sortable:!1,produkt:"allgemein"},{key:"jahreswartung",sortable:!1,produkt:"allgemein"},{key:"idLexware",sortable:!1,produkt:"allgemein"},{key:"ASP",sortable:!1,produkt:"allgemein"},{key:"info",sortable:!1,produkt:"allgemein"},{key:"individualKaufAnwendung",sortable:!1,produkt:"terraIndividual"},{key:"individualStrassendatenProMonat",sortable:!1,produkt:"terraIndividual"},{key:"schuelerASPKDO",sortable:!1,produkt:"terraSchueler"},{key:"schuelerEigenerServer",sortable:!1,produkt:"terraSchueler"},{key:"schulerStart4Punkt0",sortable:!1,produkt:"terraSchueler"}],wartungsvertraegeList:null,newWartungsvertrag:{},produkteList:[],wartungsvertraegeItem:{},index:0}},computed:{produkteListBFormOptions:function(){var e=this.produkteList.map((function(e){return e.name}));return e},fieldsTerraSchueler:function(){if(null===this.fields)return null;var e=this.fields.filter((function(e){if("allgemein"===e.produkt||"terraSchueler"===e.produkt)return!0}));return e},fieldsTerraIndividual:function(){if(null===this.fields)return null;var e=this.fields.filter((function(e){if("allgemein"===e.produkt||"terraIndividual"===e.produkt)return!0}));return e},fieldsTerraWeb:function(){if(null===this.fields)return null;var e=this.fields.filter((function(e){if("allgemein"===e.produkt||"terraWeb"===e.produkt)return!0}));return e},wartungsvertraegeListTerraSchueler:function(){if(null===this.wartungsvertraegeList)return null;var e=this.wartungsvertraegeList.filter((function(e){return"terraSchüler"===e.produkt}));return e},wartungsvertraegeListTerraIndividual:function(){if(null===this.wartungsvertraegeList)return null;var e=this.wartungsvertraegeList.filter((function(e){return"terraIndividual"===e.produkt}));return e},wartungsvertraegeListTerraWeb:function(){if(null===this.wartungsvertraegeList)return null;var e=this.wartungsvertraegeList.filter((function(e){return"terraWeb"===e.produkt}));return e}},methods:{reload:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.get("/wartungsvertraege");case 3:r=t.sent,e.wartungsvertraegeList=r.data,e.submitCalculateResultToStore(r.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},submit:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_.post("/wartungsvertraege",e.newWartungsvertrag);case 2:if(r=t.sent,200!==r.status){t.next=6;break}return t.next=6,e.reload();case 6:e.submitCalculateResult();case 7:case"end":return t.stop()}}),t)})))()},updateItem:function(e,t){var r=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,_.put("/wartungsvertraege/".concat(e),t);case 2:if(a=n.sent,200!==a.status){n.next=6;break}return n.next=6,r.reload();case 6:r.submitCalculateResult();case 7:case"end":return n.stop()}}),n)})))()},loadItem:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,_.get("/wartungsvertraege/ID/".concat(e));case 2:n=r.sent,t.wartungsvertraegeItem=n.data;case 4:case"end":return r.stop()}}),r)})))()},submitCalculateResult:function(){var e=this,t=this.totalWartungsvertraege(this.wartungsvertraegeList),r=t.filter((function(t){return t.jahr===e.$store.getters.jahr}));this.$store.dispatch("updateWartungsvertraege",r),t.forEach(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=_.post("/calculateResults",r),200!==n.status){t.next=4;break}return t.next=4,e.reload();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},submitCalculateResultToStore:function(e){var t=this,r=this.totalWartungsvertraege(e),n=r.filter((function(e){return e.jahr===t.$store.getters.jahr}));this.$store.dispatch("updateWartungsvertraege",n)},totalWartungsvertraege:function(){if(!this.wartungsvertraegeList)return 0;var e=this.wartungsvertraegeList.map((function(e){var t={};return t["jahr"]=new Date(e["start"]).getFullYear(),t["monat"]=new Date(e["start"]).getMonth(),t["proMonat"]=e["proMonat"]?e["proMonat"]:0,t["einmaligeZahlung"]=e["einmaligeZahlung"]?e["einmaligeZahlung"]:0,t["jahreswartung"]=e["jahreswartung"]?e["jahreswartung"]:0,t["fixOderGeplant"]=e["fixOderGeplant"],t["produkt"]=e["produkt"],t["individualStrassendatenProMonat"]=e["individualStrassendatenProMonat"]?e["individualStrassendatenProMonat"]:0,t})),t={};this.produkteList.map((function(e){t[e.name]=0}));var r=(new Date).getFullYear(),n=e.reduce((function(e,n){if("fix"!==n.fixOderGeplant)return e;var a=function(){var a=0;for(a=n.jahr;a<=r;a++)e.some((function(e){return e.jahr===a}))||e.push(Object(z["a"])({jahr:a,kostenLeistung:"wartungsvertraege"},t));return e.forEach((function(e){e.jahr===n.jahr&&(e[n.produkt]=e[n.produkt]+(12-n.monat)*(n.proMonat+n.individualStrassendatenProMonat)+n.jahreswartung+n.einmaligeZahlung),e.jahr>n.jahr&&(e[n.produkt]=e[n.produkt]+12*(n.proMonat+n.individualStrassendatenProMonat)+n.jahreswartung)})),{v:e}}();return"object"===Object(N["a"])(a)?a.v:void 0}),[]);return n}},mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return _.get("/produkte").then((function(t){return e.produkteList=t.data})).catch((function(e){return console.log(e)})),t.next=3,e.reload();case 3:case"end":return t.stop()}}),t)})))()}},V=Y,Z=Object(u["a"])(V,B,J,!1,null,"4f688c1a",null),q=Z.exports,U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",[e._v("Personal")]),r("div",[r("b-modal",{attrs:{id:"modal-personal",size:"xl",title:"BootstrapVue","area-hidden":"false"},on:{ok:function(t){return e.updateItem(e.personalItem._id,e.personalItem)}}},[r("p",{staticClass:"my-4"},[r("b-table-simple",[r("b-tr",e._l(e.fields,(function(t,n){return r("b-th",{key:n},[e._v(e._s(t.key))])})),1),r("b-tr",e._l(e.fields,(function(t,n){return r("b-th",{key:n},["lohnGesamtProMonat"===t.key||"prozentWeb"===t.key||"prozentSchueler"===t.key||"prozentIndividual"===t.key?r("b-form-input",{attrs:{type:"number"},model:{value:e.personalItem[t.key],callback:function(r){e.$set(e.personalItem,t.key,r)},expression:"personalItem[field.key]"}}):"abDatum"===t.key||"bisDatum"===t.key?r("b-form-datepicker",{model:{value:e.personalItem[t.key],callback:function(r){e.$set(e.personalItem,t.key,r)},expression:"personalItem[field.key]"}}):r("b-form-input",{attrs:{placeholder:t.key},model:{value:e.personalItem[t.key],callback:function(r){e.$set(e.personalItem,t.key,r)},expression:"personalItem[field.key]"}})],1)})),1)],1)],1)])],1),r("b-table-simple",{attrs:{striped:"",hover:""}},[r("b-thead",[r("b-tr",[e._l(e.fields,(function(t,n){return r("b-th",{key:n},[e._v(e._s(t.key))])})),r("b-th")],2)],1),r("b-tbody",[e._l(e.personalList,(function(t,n){return r("b-tr",{key:n},[e._l(e.fields,(function(n,a){return r("b-th",{key:a},[t[n.key]&&"abDatum"===n.key||t[n.key]&&"bisDatum"===n.key?r("span",[e._v(e._s(new Date(t[n.key]).toLocaleDateString()))]):r("span",[e._v(e._s(t[n.key]))])])})),r("b-th",[r("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-personal",modifiers:{"modal-personal":!0}}],key:n,attrs:{variant:"info"},on:{click:function(r){return r.preventDefault(),e.loadItem(t._id)}}},[e._v("Edit")])],1)],2)})),r("b-tr",[e._l(e.fields,(function(t,n){return r("b-th",{key:n},["lohnGesamtProMonat"===t.key||"prozentWeb"===t.key||"prozentSchueler"===t.key||"prozentIndividual"===t.key?r("b-form-input",{attrs:{type:"number"},model:{value:e.newPersonal[t.key],callback:function(r){e.$set(e.newPersonal,t.key,r)},expression:"newPersonal[field.key]"}}):"abDatum"===t.key||"bisDatum"===t.key?r("b-form-datepicker",{model:{value:e.newPersonal[t.key],callback:function(r){e.$set(e.newPersonal,t.key,r)},expression:"newPersonal[field.key]"}}):r("b-form-input",{attrs:{placeholder:t.key},model:{value:e.newPersonal[t.key],callback:function(r){e.$set(e.newPersonal,t.key,r)},expression:"newPersonal[field.key]"}})],1)})),r("b-th",[r("b-btn",{attrs:{variant:"success"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("Submit")])],1)],2)],2)],1)],1)},H=[],Q={name:"personal",data:function(){return{fields:[{key:"name",sortable:!0},{key:"funktion",sortable:!0},{key:"abDatum",sortable:!1},{key:"bisDatum",sortable:!0},{key:"lohnGesamtProMonat",sortable:!1},{key:"prozentWeb",sortable:!1},{key:"prozentSchueler",sortable:!1},{key:"prozentIndividual",sortable:!1}],personalList:null,newPersonal:{},personalItem:{},produkteList:[]}},computed:{},methods:{reload:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.get("/personal");case 3:r=t.sent,e.personalList=r.data,e.submitCalculateResultToStore(r.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},submit:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_.post("/personal",e.newPersonal);case 2:if(r=t.sent,200!==r.status){t.next=6;break}return t.next=6,e.reload();case 6:e.submitCalculateResult();case 7:case"end":return t.stop()}}),t)})))()},removeItem:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,_.delete("/personal/".concat(e));case 2:if(n=r.sent,200!==n.status){r.next=8;break}return alert("Eintrag mit ID ".concat(e," wurde gelöscht.")),r.next=7,t.reload();case 7:t.submitCalculateResult();case 8:case"end":return r.stop()}}),r)})))()},loadItem:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,_.get("/personal/ID/".concat(e));case 2:n=r.sent,t.personalItem=n.data;case 4:case"end":return r.stop()}}),r)})))()},updateItem:function(e,t){var r=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,_.put("/personal/".concat(e),t);case 2:if(a=n.sent,200!==a.status){n.next=7;break}return n.next=6,r.reload();case 6:r.submitCalculateResult();case 7:case"end":return n.stop()}}),n)})))()},submitCalculateResult:function(){var e=this,t=this.totalPersonal(this.personalList),r=t.filter((function(t){return t.jahr===e.$store.getters.jahr}));this.$store.dispatch("updatePersonal",r),t.forEach(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=_.post("/calculateResults",r),200!==n.status){t.next=4;break}return t.next=4,e.reload();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},submitCalculateResultToStore:function(e){var t=this,r=this.totalPersonal(e),n=r.filter((function(e){return e.jahr===t.$store.getters.jahr}));this.$store.dispatch("updatePersonal",n)},totalPersonal:function(e){var t=this;if(!e)return 0;var r=e.map((function(e){var t={};return t["jahrStart"]=new Date(e["abDatum"]).getFullYear(),t["jahrStop"]=new Date(e["bisDatum"]).getFullYear(),t["monatStart"]=new Date(e["abDatum"]).getMonth(),t["monatStop"]=new Date(e["bisDatum"]).getMonth(),t["lohnGesamtProMonat"]=e["lohnGesamtProMonat"]?e["lohnGesamtProMonat"]:0,t["terraWeb"]=e["prozentWeb"]?e["prozentWeb"]:0,t["terraSchüler"]=e["prozentSchueler"]?e["prozentSchueler"]:0,t["terraIndividual"]=e["prozentIndividual"]?e["prozentIndividual"]:0,t["sonstige"]=0,t})),n={};this.produkteList.map((function(e){n[e.name]=0}));var a=r.reduce((function(e,r){var a=0;for(a=r.jahrStart;a<=r.jahrStop;a++)e.some((function(e){return e.jahr===a}))||e.push(Object(z["a"])({jahr:a,kostenLeistung:"personal"},n));return e.forEach((function(e){if(e.jahr===r.jahrStart&&e.jahr!==r.jahrStop){var n=0;for(n=0;n<t.produkteList.length;n++)e[t.produkteList[n].name]=e[t.produkteList[n].name]+(12-r.monatStart)*r.lohnGesamtProMonat*r[t.produkteList[n].name]*.01}if(e.jahr>r.jahrStart&&e.jahr<r.jahrStop){var a=0;for(a=0;a<t.produkteList.length;a++)e[t.produkteList[a].name]=e[t.produkteList[a].name]+12*r.lohnGesamtProMonat*r[t.produkteList[a].name]*.01}if(e.jahr===r.jahrStop&&e.jahr!==r.jahrStart){var s=0;for(s=0;s<t.produkteList.length;s++)e[t.produkteList[s].name]=e[t.produkteList[s].name]+(r.monatStop+1)*r.lohnGesamtProMonat*r[t.produkteList[s].name]*.01}if(e.jahr===r.jahrStop&&e.jahr===r.jahrStart){var u=0;for(u=0;u<t.produkteList.length;u++)e[t.produkteList[u].name]=e[t.produkteList[u].name]+(r.monatStop-r.monatStart+1)*r.lohnGesamtProMonat*r[t.produkteList[u].name]*.01}})),e}),[]);return a}},mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return _.get("/produkte").then((function(t){return e.produkteList=t.data})).catch((function(e){return console.log(e)})),t.next=3,e.reload();case 3:case"end":return t.stop()}}),t)})))()}},X=Q,ee=Object(u["a"])(X,U,H,!1,null,null,null),te=ee.exports,re={name:"home",components:{produkteJahresueberblick:P,extraEinnahmen:A,wartungsvertraege:q,personal:te}},ne=re,ae=Object(u["a"])(ne,d,m,!1,null,null,null),se=ae.exports;n["default"].use(c["a"]);var ue=[{path:"/",name:"home",component:se},{path:"/konto/neuer-eintrag",name:"neuer-eintrag",component:function(){return r.e("chunk-2d213cc4").then(r.bind(null,"ade0"))}}],ie=new c["a"]({mode:"history",base:"/",routes:ue}),oe=ie,le=r("2f62");n["default"].use(le["a"]);var ce=new le["a"].Store({strict:!0,state:{form:{jahr:null},calculateResults:{extraEinnahmen:{},wartungsvertraege:{},personal:{}},kalkulierteKosten:{kalkulierteKosten:{}}},mutations:{updateJahr:function(e,t){e.form.jahr=t},updateExtraEinnahmen:function(e,t){e.calculateResults.extraEinnahmen=t},updateWartungsvertraege:function(e,t){e.calculateResults.wartungsvertraege=t},updatePersonal:function(e,t){e.calculateResults.personal=t},updateKalkulierteKosten:function(e,t){e.kalkulierteKosten.kalkulierteKosten=t}},actions:{updateJahr:function(e,t){e.commit("updateJahr",t)},updateExtraEinnahmen:function(e,t){e.commit("updateExtraEinnahmen",t)},updateWartungsvertraege:function(e,t){e.commit("updateWartungsvertraege",t)},updatePersonal:function(e,t){e.commit("updatePersonal",t)},updateKalkulierteKosten:function(e,t){e.commit("updateKalkulierteKosten",t)}},getters:{jahr:function(e){return e.form.jahr},extraEinnahmen:function(e){return e.calculateResults.extraEinnahmen},wartungsvertraege:function(e){return e.calculateResults.wartungsvertraege},personal:function(e){return e.calculateResults.personal},kalkulierteKosten:function(e){return e.kalkulierteKosten.kalkulierteKosten}},modules:{}}),de=(r("f9e3"),r("2dd8"),r("5f5b")),me=r("b1e0");r("6418");n["default"].use(de["a"]),n["default"].use(me["a"]),n["default"].config.productionTip=!1,new n["default"]({router:oe,store:ce,render:function(e){return e(l)}}).$mount("#app")},6418:function(e,t,r){},"84df":function(e,t,r){},"85ec":function(e,t,r){},aaa0:function(e,t,r){},b6ec:function(e,t,r){},c358:function(e,t,r){"use strict";var n=r("aaa0"),a=r.n(n);a.a}});
//# sourceMappingURL=app.1ccfb4e7.js.map